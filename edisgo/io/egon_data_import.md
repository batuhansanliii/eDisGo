# Import data from a local or remote [egon-data](https://github.com/openego/eGon-data) database

To import data from the database the `egon-data.configuration.yaml` generated by
egon-data is used. If access to a remote database via ssh is desired, then an
`ssh-tunnel` section must be added to the (copy of the) `egon-data.configuration.yaml`
with the ssh connection information. For example, this would look like this:

```yaml
egon-data:
  --airflow-database-name: airflow
  --airflow-port: 8080
  --compose-project-name: egon-data-db
  --database-host: 127.0.0.1
  --database-name: egon-data-db
  --database-password: data
  --database-port: '59782'
  --database-user: egon
  --dataset-boundary: Schleswig-Holstein
  --docker-container-name: egon-data-db
  --jobs: 12
  --processes-per-task: 1
  --random-seed: 42
ssh-tunnel:
  ssh-host: "111.222.33.444"
  ssh-user: "user.name"
  ssh-pkey: "~/.ssh/path-to-private-key"
  pgres-host: "localhost"
```

To get data from the database, the database engine has to be instantiated first:

```python
from pathlib import Path

from edisgo.io.egon_data_import import engine

config_path = Path("path/to/egon-data.configuration.yaml")

engine = engine(path=config_path, ssh=True)  # set ssh True if remote else False
```

## E-Mobility

The import of E-Mobility from the database works automatically and just needs the
instantiated database engine. The amount of EVs and potential charging parks is taken
from the database. The import may look like this:

```python
import pandas as pd

from pathlib import Path

from edisgo import EDisGo
from edisgo.io.egon_data_import import engine

ding0_path = Path("path/to/.ding0/grid")
config_path = Path("path/to/egon-data.configuration.yaml")

edisgo = EDisGo(ding0_grid=ding0_path)
timeindex = pd.date_range("1/1/2011", periods=365 * 7, freq="H")

edisgo.set_timeindex(timeindex)
edisgo.resample_timeseries()

engine = engine(path=config_path, ssh=True)
edisgo.import_electromobility_from_database(engine)

edisgo.apply_charging_strategy()
```
